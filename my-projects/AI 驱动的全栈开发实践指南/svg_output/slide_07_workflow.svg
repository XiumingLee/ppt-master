<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1280 720" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景渐变 -->
  <defs>
    <linearGradient id="bg-gradient-07" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EDE9FE;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#E0F2FE;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#DBEAFE;stop-opacity:1" />
    </linearGradient>
  </defs>
  <rect width="1280" height="720" fill="url(#bg-gradient-07)"/>

  <!-- 顶部色条 -->
  <rect width="1280" height="8" fill="#1E3A5F"/>

  <!-- 标题 -->
  <text x="640" y="70" text-anchor="middle" font-family="微软雅黑, Arial" font-size="42" font-weight="bold" fill="#1E3A5F">
    从想法到上线的 SOP
  </text>

  <!-- 分隔线 -->
  <rect x="540" y="95" width="200" height="3" fill="#22D3EE"/>

  <!-- 副标题 -->
  <text x="640" y="135" text-anchor="middle" font-family="微软雅黑, Arial" font-size="22" fill="#64748B">
    操作手册：标准工作流
  </text>

  <!-- 箭头定义 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#22D3EE"/>
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#F59E0B"/>
    </marker>
  </defs>

  <!-- 线性流程图：1 → 2 → 3 → 4（居中显示） -->
  <g transform="translate(97, 190)">
    <!-- 步骤1 -->
    <g transform="translate(0, 0)">
      <rect width="220" height="95" rx="12" fill="#FFFFFF" stroke="#22D3EE" stroke-width="3"/>
      <rect x="0" y="0" width="45" height="95" rx="12" fill="#22D3EE"/>
      <text x="22.5" y="55" text-anchor="middle" font-family="Arial" font-size="22" font-weight="bold" fill="#FFFFFF">1</text>
      <text x="132.5" y="42" text-anchor="middle" font-family="微软雅黑, Arial" font-size="17" font-weight="bold" fill="#1E3A5F">
        需求结构化
      </text>
      <text x="132.5" y="65" text-anchor="middle" font-family="微软雅黑, Arial" font-size="12" fill="#64748B">
        生成 PRD 和 ER 图
      </text>
    </g>

    <!-- 箭头 1→2 -->
    <g transform="translate(230, 47)">
      <text x="15" y="8" text-anchor="middle" font-family="Arial" font-size="30" fill="#22D3EE">→</text>
    </g>

    <!-- 步骤2 -->
    <g transform="translate(275, 0)">
      <rect width="220" height="95" rx="12" fill="#FFFFFF" stroke="#6366F1" stroke-width="3"/>
      <rect x="0" y="0" width="45" height="95" rx="12" fill="#6366F1"/>
      <text x="22.5" y="55" text-anchor="middle" font-family="Arial" font-size="22" font-weight="bold" fill="#FFFFFF">2</text>
      <text x="132.5" y="42" text-anchor="middle" font-family="微软雅黑, Arial" font-size="17" font-weight="bold" fill="#1E3A5F">
        环境基座
      </text>
      <text x="132.5" y="65" text-anchor="middle" font-family="微软雅黑, Arial" font-size="12" fill="#64748B">
        初始化配置与依赖
      </text>
    </g>

    <!-- 箭头 2→3 -->
    <g transform="translate(505, 47)">
      <text x="15" y="8" text-anchor="middle" font-family="Arial" font-size="30" fill="#22D3EE">→</text>
    </g>

    <!-- 步骤3 - 增量开发循环（突出显示） -->
    <g transform="translate(550, 0)">
      <rect width="260" height="95" rx="12" fill="#FEF3C7" stroke="#F59E0B" stroke-width="4"/>
      <rect x="0" y="0" width="45" height="95" rx="12" fill="#F59E0B"/>
      <text x="22.5" y="55" text-anchor="middle" font-family="Arial" font-size="22" font-weight="bold" fill="#FFFFFF">3</text>
      <text x="152.5" y="42" text-anchor="middle" font-family="微软雅黑, Arial" font-size="17" font-weight="bold" fill="#B45309">
        增量开发循环
      </text>
      <text x="152.5" y="65" text-anchor="middle" font-family="微软雅黑, Arial" font-size="12" fill="#92400E">
        （内部迭代，见下方详解）
      </text>
    </g>

    <!-- 箭头 3→4 -->
    <g transform="translate(820, 47)">
      <text x="15" y="8" text-anchor="middle" font-family="Arial" font-size="30" fill="#22D3EE">→</text>
    </g>

    <!-- 步骤4 -->
    <g transform="translate(865, 0)">
      <rect width="220" height="95" rx="12" fill="#FFFFFF" stroke="#22D3EE" stroke-width="3"/>
      <rect x="0" y="0" width="45" height="95" rx="12" fill="#22D3EE"/>
      <text x="22.5" y="55" text-anchor="middle" font-family="Arial" font-size="22" font-weight="bold" fill="#FFFFFF">4</text>
      <text x="132.5" y="42" text-anchor="middle" font-family="微软雅黑, Arial" font-size="17" font-weight="bold" fill="#1E3A5F">
        部署交付
      </text>
      <text x="132.5" y="65" text-anchor="middle" font-family="微软雅黑, Arial" font-size="12" fill="#64748B">
        Docker或脚本部署与启动
      </text>
    </g>
  </g>

  <!-- Step 3 内部循环详解 - 循环流程图 -->
  <g transform="translate(640, 490)">
    <!-- 上方：给出指令 -->
    <g transform="translate(0, -100)">
      <rect x="-100" y="-30" width="200" height="50" rx="8" fill="#FFFFFF" stroke="#F59E0B" stroke-width="2"/>
      <text x="0" y="0" text-anchor="middle" font-family="微软雅黑, Arial" font-size="15" font-weight="bold" fill="#B45309">
        给出开发指令
      </text>
    </g>

    <!-- 右方：AI 生成代码 -->
    <g transform="translate(180, 0)">
      <rect x="-80" y="-25" width="160" height="50" rx="8" fill="#FFFFFF" stroke="#F59E0B" stroke-width="2"/>
      <text x="0" y="5" text-anchor="middle" font-family="微软雅黑, Arial" font-size="15" font-weight="bold" fill="#B45309">
        AI 生成代码
      </text>
    </g>

    <!-- 下方：测试修复 -->
    <g transform="translate(0, 100)">
      <rect x="-100" y="-30" width="200" height="50" rx="8" fill="#FFFFFF" stroke="#F59E0B" stroke-width="2"/>
      <text x="0" y="0" text-anchor="middle" font-family="微软雅黑, Arial" font-size="15" font-weight="bold" fill="#B45309">
        测试 → 报错修复
      </text>
    </g>

    <!-- 左方：Git 锁定 -->
    <g transform="translate(-180, 0)">
      <rect x="-80" y="-25" width="160" height="50" rx="8" fill="#DCFCE7" stroke="#16A34A" stroke-width="2"/>
      <text x="0" y="5" text-anchor="middle" font-family="微软雅黑, Arial" font-size="15" font-weight="bold" fill="#166534">
        Git 提交锁定
      </text>
    </g>

    <!-- 中心标签 -->
    <circle cx="0" cy="0" r="50" fill="#F59E0B"/>
    <text x="0" y="-5" text-anchor="middle" font-family="微软雅黑, Arial" font-size="12" font-weight="bold" fill="#FFFFFF">
      重复
    </text>
    <text x="0" y="12" text-anchor="middle" font-family="微软雅黑, Arial" font-size="12" font-weight="bold" fill="#FFFFFF">
      循环
    </text>

    <!-- 循环箭头 -->
    <!-- 指令 → AI -->
    <path d="M 80 -60 Q 150 -60 160 -35" fill="none" stroke="#F59E0B" stroke-width="2.5" marker-end="url(#arrowhead-orange)"/>
    <!-- AI → 测试 -->
    <path d="M 170 35 Q 170 60 100 60" fill="none" stroke="#F59E0B" stroke-width="2.5" marker-end="url(#arrowhead-orange)"/>
    <!-- 测试 → Git -->
    <path d="M -100 60 Q -150 60 -160 35" fill="none" stroke="#F59E0B" stroke-width="2.5" marker-end="url(#arrowhead-orange)"/>
    <!-- Git → 指令（完成闭环） -->
    <path d="M -170 -35 Q -170 -60 -80 -60" fill="none" stroke="#16A34A" stroke-width="2.5" marker-end="url(#arrowhead-orange)"/>

    <!-- 标题（放在最后，确保在最上层） -->
    <text x="0" y="-145" text-anchor="middle" font-family="微软雅黑, Arial" font-size="20" font-weight="bold" fill="#B45309">
      Step 3：增量开发内部循环
    </text>
  </g>

  <!-- 底部提示框 -->
  <g transform="translate(640, 660)">
    <rect x="-500" y="-35" width="1000" height="70" rx="10" fill="#1E3A5F"/>
    <text x="0" y="-8" text-anchor="middle" font-family="微软雅黑, Arial" font-size="15" font-weight="bold" fill="#22D3EE">
      💡 核心要点
    </text>
    <text x="0" y="18" text-anchor="middle" font-family="微软雅黑, Arial" font-size="14" fill="#FFFFFF">
      1→2→3→4 是线性流程 | Step 3 内部是循环迭代 | 每次功能稳定后立即 Git 提交
    </text>
  </g>
</svg>
